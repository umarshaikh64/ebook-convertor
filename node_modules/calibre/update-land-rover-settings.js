#!/usr/bin/env node

const sites = [{ "name": "Land Rover Canada", "slug": "land-rover-canada", "scheduleInterval": "every_x_hours", "scheduleAnchor": 6, "location": { "tag": "Canada" }, "pages": [{ "name": "Defender nameplate overview", "url": "https://www.landrover.ca/en/vehicles/defender/index.html" }, { "name": "Home", "url": "https://www.landrover.ca/en/build-your-own/index.html" }] }, { "name": "Land Rover Korea", "slug": "land-rover-korea", "scheduleInterval": "daily", "scheduleAnchor": 19, "location": { "tag": "Seoul" }, "pages": [{ "name": "Evoque Nameplate Overview", "url": "https://www.landroverkorea.co.kr/vehicles/range-rover-evoque/index.html" }, { "name": "Home", "url": "https://www.landroverkorea.co.kr/index.html" }] }, { "name": "Land Rover Germany", "slug": "land-rover-germany", "scheduleInterval": "daily", "scheduleAnchor": 10, "location": { "tag": "Frankfurt" }, "pages": [{ "name": "Evoque Nameplate Overview", "url": "https://www.landrover.de/vehicles/range-rover-evoque/index.html" }, { "name": "Home", "url": "https://www.landrover.de" }] }, { "name": "Land Rover UK", "slug": "land-rover-uk", "scheduleInterval": "daily", "scheduleAnchor": 13, "location": { "tag": "London" }, "pages": [{ "name": "Build your own", "url": "https://rules.config.landrover.com/jdxl/en_gb/l494/" }, { "name": "Evoque Nameplate Overview", "url": "https://www.landrover.co.uk/vehicles/range-rover-evoque/index.html" }, { "name": "Home", "url": "https://www.landrover.co.uk/index.html" }] }, { "name": "Jaguar Korea", "slug": "jaguar-korea", "scheduleInterval": "daily", "scheduleAnchor": 16, "location": { "tag": "Seoul" }, "pages": [{ "name": "F-PACE Nameplate", "url": "https://www.jaguarkorea.co.kr/jaguar-range/f-pace/index.html" }, { "name": "Home", "url": "https://www.jaguarkorea.co.kr/index.html" }] }, { "name": "Land Rover South Africa", "slug": "land-rover-south-africa", "scheduleInterval": "every_x_hours", "scheduleAnchor": 6, "location": { "tag": "Mumbai" }, "pages": [{ "name": "Defender nameplate overview", "url": "https://www.landrover.co.za/vehicles/defender/index.html" }, { "name": "Home", "url": "https://www.landrover.co.za/index.html" }] }, { "name": "Land Rover Brazil", "slug": "land-rover-brazil", "scheduleInterval": "daily", "scheduleAnchor": 14, "location": { "tag": "SaoPaulo" }, "pages": [{ "name": "Evoque Nameplate Overview", "url": "https://www.landrover.com.br/vehicles/range-rover-evoque/index.html" }, { "name": "Home", "url": "https://www.landrover.com.br/index.html" }] }, { "name": "Land Rover Russia", "slug": "land-rover-russia", "scheduleInterval": "every_x_hours", "scheduleAnchor": 6, "location": { "tag": "Frankfurt" }, "pages": [{ "name": "Range rover sport special offer", "url": "https://www.landrover.ru/special-offers/special-offer-range-rover-sport.html" }, { "name": "Home", "url": "https://www.landrover.ru/index.html" }] }, { "name": "Jaguar China", "slug": "jaguar-china", "scheduleInterval": "daily", "scheduleAnchor": 8, "location": { "tag": "Seoul" }, "pages": [{ "name": "F-PACE Nameplate", "url": "https://www.jaguar.com.cn/jaguar-range/f-pace/index.html" }, { "name": "Home", "url": "https://www.jaguar.com.cn/index.html" }] }, { "name": "Land Rover USA", "slug": "land-rover-usa", "scheduleInterval": "daily", "scheduleAnchor": 7, "location": { "tag": "NorthVirginia" }, "pages": [{ "name": "Evoque Nameplate Overview", "url": "https://www.landroverusa.com/vehicles/range-rover-evoque/index.html " }, { "name": "Home", "url": "https://www.landroverusa.com/index.html" }] }, { "name": "Land Rover China", "slug": "land-rover-china", "scheduleInterval": "daily", "scheduleAnchor": 19, "location": { "tag": "Seoul" }, "pages": [{ "name": "Velar nameplate overview", "url": "https://www.landrover.com.cn/vehicles/range-rover-velar/index.html" }, { "name": "Evoque Nameplate Overview", "url": "https://www.landrover.com.cn/vehicles/range-rover-evoque/index.html" }, { "name": "Home", "url": "https://www.landrover.com.cn/index.html" }] }, { "name": "Jaguar UK", "slug": "jaguar-uk", "scheduleInterval": "daily", "scheduleAnchor": 3, "location": { "tag": "London" }, "pages": [{ "name": "F-TYPE nameplate", "url": "https://www.jaguar.co.uk/jaguar-range/f-type/index.html" }, { "name": "F-PACE Nameplate", "url": "https://www.jaguar.co.uk/jaguar-range/f-pace/index.html" }, { "name": "Home", "url": "https://www.jaguar.co.uk/index.html" }] }, { "name": "Jaguar Brazil", "slug": "jaguar-brazil", "scheduleInterval": "daily", "scheduleAnchor": 16, "location": { "tag": "SaoPaulo" }, "pages": [{ "name": "I-PACE nameplate overview", "url": "https://www.jaguarbrasil.com.br/jaguar-range/i-pace/index.html" }, { "name": "F-PACE Nameplate", "url": "https://www.jaguarbrasil.com.br/jaguar-range/f-pace/index.html " }, { "name": "Home", "url": "https://www.jaguarbrasil.com.br/index.html" }] }, { "name": "Jaguar Germany", "slug": "jaguar-germany", "scheduleInterval": "daily", "scheduleAnchor": 21, "location": { "tag": "Frankfurt" }, "pages": [{ "name": "F-PACE Nameplate", "url": "https://www.jaguar.de/jaguar-modelle/f-pace/index.html" }, { "name": "Home", "url": "https://www.jaguar.de/index.html" }] }, { "name": "Jaguar USA", "slug": "jaguar-usa", "scheduleInterval": "daily", "scheduleAnchor": 5, "location": { "tag": "NorthVirginia" }, "pages": [{ "name": "F-PACE Nameplate", "url": "https://www.jaguarusa.com/all-models/f-pace/index.html" }, { "name": "Home", "url": "https://www.jaguarusa.com/index.html" }] }]


// Save existing sites to json, recreate with default settings

const { Site, AgentSettings, Snapshot } = require('calibre')

const PROFILES = [
  { name: 'Chrome Desktop, Cable', connection: 'cable' },
  { name: 'MotoG4, 3G', connection: 'good3G', device: 'MotorolaMotoG4' }
]

const createAccountFromJSON = async () => {
  for await (const site of sites) {
    try {
      const newSite = await Site.create({ name: site.name, location: site.location.tag, pages: site.pages, testProfiles: PROFILES })

      await AgentSettings.update({
        site: newSite.slug,
        scheduleAnchor: 1,
        scheduleInterval: 'daily',
        location: site.location.tag
      })

      console.log(newSite)
    } catch (e) { console.log(e) }

  }
}

const createSnapshots = async () => {
  for await (const site of (await Site.list())) {
    try {
      await Snapshot.create({ site: site.slug })
      await Snapshot.create({ site: site.slug })
      await Snapshot.create({ site: site.slug })
    } catch (e) { console.error(e) }
  }
}

createSnapshots();